/*
  CSS Architecture for use-wallet-ui

  Two scoping attributes are used:
  - [data-wallet-theme]: Provider-level wrapper for CSS variable definitions
  - [data-wallet-ui]: Component-level attribute for utility class scoping and CSS resets

  This separation allows:
  1. CSS variables to inherit from provider to all descendants
  2. Consumers to override variables via ancestor selectors (same specificity, load order wins)
  3. Utility classes to only affect library components, not consumer app elements

  Note: We use a minimal reset that only targets library component elements,
  NOT Tailwind's full preflight, to avoid affecting consumer app elements.
*/

@import 'tailwindcss/theme.css';

/*
  Minimal reset for library components only.
  This targets only the elements the library actually renders, avoiding
  interference with consumer app elements (headings, paragraphs, etc.).

  Note: We use [data-wallet-button] to target only the library's buttons,
  not custom trigger buttons that consumers may pass as children.
*/
[data-wallet-ui][data-wallet-button],
[data-wallet-ui] [role="dialog"],
[data-wallet-ui] [role="menu"],
[data-wallet-ui] [role="listbox"] {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  border: 0 solid;
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  line-height: 1.5;
}

/* Button-specific reset - for library buttons and buttons inside dialogs/menus */
/* Uses :where() to reduce specificity, allowing utility classes to override */
[data-wallet-ui]:where([data-wallet-button]),
[data-wallet-ui] :where([role="dialog"]) button,
[data-wallet-ui] :where([role="menu"]) button,
[data-wallet-ui] :where([role="listbox"]) button {
  cursor: pointer;
  background-color: transparent;
  background-image: none;
  text-transform: none;
  -webkit-appearance: button;
  appearance: button;
}

/* Reset for elements inside dialogs/menus (the actual library UI) */
[data-wallet-ui] [role="dialog"] *,
[data-wallet-ui] [role="menu"] *,
[data-wallet-ui] [role="listbox"] * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  border: 0 solid;
  list-style: none;
}

/* Image resets for library elements */
[data-wallet-ui] [role="dialog"] img,
[data-wallet-ui] [role="menu"] img,
[data-wallet-ui] [role="listbox"] img {
  display: block;
  max-width: 100%;
  height: auto;
}

/* Theme - CSS custom properties */

/* Light mode (default) */
[data-wallet-theme] {
  --wui-color-primary: #2d2df1;
  --wui-color-primary-hover: #2929d9;
  --wui-color-primary-text: #ffffff;
  --wui-color-bg: #ffffff;
  --wui-color-bg-secondary: #f9fafb;
  --wui-color-bg-tertiary: #f3f4f6;
  --wui-color-bg-hover: #e9e9fd;
  --wui-color-text: #1f2937;
  --wui-color-text-secondary: #6b7280;
  --wui-color-text-tertiary: #9ca3af;
  --wui-color-border: #e5e7eb;
  --wui-color-link: rgba(45, 45, 241, 0.8);
  --wui-color-link-hover: #2d2df1;
  --wui-color-overlay: rgba(0, 0, 0, 0.3);
  --wui-color-danger-bg: #fee2e2;
  --wui-color-danger-bg-hover: #fecaca;
  --wui-color-danger-text: #b91c1c;
  --wui-color-avatar-bg: #e5e7eb;
  --wui-color-avatar-icon: #9ca3af;
}

/* Dark mode via data-theme attribute (explicit) */
[data-wallet-theme][data-theme='dark'] {
  --wui-color-primary: #bfbff9;
  --wui-color-primary-hover: #d4d4fa;
  --wui-color-primary-text: #001324;
  --wui-color-bg: #001324;
  --wui-color-bg-secondary: #101b29;
  --wui-color-bg-tertiary: #192a39;
  --wui-color-bg-hover: #192a39;
  --wui-color-text: #e9e9fd;
  --wui-color-text-secondary: #99a1a7;
  --wui-color-text-tertiary: #6b7280;
  --wui-color-border: #192a39;
  --wui-color-link: #6c6cf1;
  --wui-color-link-hover: #8080f3;
  --wui-color-overlay: rgba(0, 0, 0, 0.5);
  --wui-color-danger-bg: rgba(127, 29, 29, 0.4);
  --wui-color-danger-bg-hover: rgba(127, 29, 29, 0.6);
  --wui-color-danger-text: #fca5a5;
  --wui-color-avatar-bg: #192a39;
  --wui-color-avatar-icon: #6b7280;
}

/* Dark mode via .dark class on ancestor (Tailwind convention) */
.dark [data-wallet-theme]:not([data-theme='light']) {
  --wui-color-primary: #bfbff9;
  --wui-color-primary-hover: #d4d4fa;
  --wui-color-primary-text: #001324;
  --wui-color-bg: #001324;
  --wui-color-bg-secondary: #101b29;
  --wui-color-bg-tertiary: #192a39;
  --wui-color-bg-hover: #192a39;
  --wui-color-text: #e9e9fd;
  --wui-color-text-secondary: #99a1a7;
  --wui-color-text-tertiary: #6b7280;
  --wui-color-border: #192a39;
  --wui-color-link: #6c6cf1;
  --wui-color-link-hover: #8080f3;
  --wui-color-overlay: rgba(0, 0, 0, 0.5);
  --wui-color-danger-bg: rgba(127, 29, 29, 0.4);
  --wui-color-danger-bg-hover: rgba(127, 29, 29, 0.6);
  --wui-color-danger-text: #fca5a5;
  --wui-color-avatar-bg: #192a39;
  --wui-color-avatar-icon: #6b7280;
}

/* Dark mode via system preference (when theme="system" or no explicit theme) */
@media (prefers-color-scheme: dark) {
  [data-wallet-theme]:not([data-theme='light']):not([data-theme='dark']) {
    --wui-color-primary: #bfbff9;
    --wui-color-primary-hover: #d4d4fa;
    --wui-color-primary-text: #001324;
    --wui-color-bg: #001324;
    --wui-color-bg-secondary: #101b29;
    --wui-color-bg-tertiary: #192a39;
    --wui-color-bg-hover: #192a39;
    --wui-color-text: #e9e9fd;
    --wui-color-text-secondary: #99a1a7;
    --wui-color-text-tertiary: #6b7280;
    --wui-color-border: #192a39;
    --wui-color-link: #6c6cf1;
    --wui-color-link-hover: #8080f3;
    --wui-color-overlay: rgba(0, 0, 0, 0.5);
    --wui-color-danger-bg: rgba(127, 29, 29, 0.4);
    --wui-color-danger-bg-hover: rgba(127, 29, 29, 0.6);
    --wui-color-danger-text: #fca5a5;
    --wui-color-avatar-bg: #192a39;
    --wui-color-avatar-icon: #6b7280;
  }
}

/* Tailwind utilities (post-processed to add [data-wallet-ui] prefix) */
@import 'tailwindcss/utilities.css';
